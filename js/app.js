"use strict";let appData={userChoice:{darkMode:!1},currURL:location.href,currPAGE:null,online:!0,scrollPos:{top:0,left:0}},profile={title:"web developer",subnaviationList:[{name:"About",href:"about"},{name:"Services",href:"services"},{name:"Skills",href:"skills"},{name:"Contact",href:"contactSection"}]},smile={title:"Smile",subnaviationList:[{name:"Home",href:"homeSection"},{name:"About",href:"aboutSection"},{name:"Archive",href:"archiveSection"},{name:"Contact",href:"contactSection"}]};window.addEventListener("beforeinstallprompt",e=>{let t,a=document.querySelector(".install");a.style.display="none",e.preventDefault(),t=e,a.style.display="block",a.addEventListener("click",e=>{a.style.display="none",t.prompt(),t.userChoice.then(e=>{"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),t=null})})});let lazyloadBackgroundImageOvserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target;a.dataset.url&&(a.style.backgroundImage="url('"+a.dataset.url+"')"),a.classList.remove("lazy"),t.unobserve(a)}})},{threshold:.8}),lazyloadImgOvserver=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){let a=e.target;for(var s in a.children){var r=a.children[s];"string"==typeof r.tagName&&("SOURCE"==r.tagName||"IMG"==r.tagName)&&(r.srcset=r.dataset.srcset,a.dataset.src&&(a.src=a.dataset.src))}a.classList.remove("lazy"),t.unobserve(a)}})},{threshold:.8}),dataFromServer={};function lazyLoadImage(e){document.querySelectorAll(".lazyLoad").forEach(e=>{lazyloadImgOvserver.observe(e)})}function init(){setUI(),appData.currURL=location.href,history.replaceState(appData,"",location.href),routeToUrl(appData)}function getUrlQueryParams(e){var t=e.split("?")[1].split("&"),a=[],s={};return t.forEach(function(e){s[(a=e.split("="))[0]]=decodeURIComponent(a[1]).replace(/\+/g," ")}),s}function setUI(){var e=$(".app-header").css("height");let t=$("nav").css("height");$("#behindHeader").css("height",e),$("#behindFooter").css("height",t)}function routeToUrl(e){let t=[],a=new URL(e.currURL);$(".menu.active").removeClass("active"),location.search&&(t=getUrlQueryParams(a.search)),$("link.pageCss").remove();let s=document.getElementsByTagName("html")[0].classList;switch(s.remove("theme-B"),s.add("theme-A"),$(".app-header").removeClass("theme-B"),$(".app-header").removeClass("theme-A"),$(window).off("scroll"),t.page){case"home":case void 0:case"index.html":e.currPAGE="home",$("title").text("Prakhar Mastain | HOME"),$("head").append('<link rel="stylesheet" class="pageCss" type="text/css" href="/css/home.css">'),document.getElementById("home").parentElement.className+=" active",$(".page-content").load("/src/home.html",processPage);break;case"profile":$("title").text("Prakhar Mastain | PROFESSION"),e.currPAGE="profile",$("head").append('<link rel="stylesheet" class="pageCss" type="text/css" href="/css/profile.css">'),$(".page-content").load("/src/profile.html",processPage),document.getElementById("profile").parentElement.className+=" active";break;case"charity":$("title").text("Prakhar Mastain | CONTRIBUTE"),e.currPAGE="smile",$("head").append('<link rel="stylesheet" class="pageCss" type="text/css" href="/css/smile.css">'),$(".page-content").load("/src/smile.html",processPage),document.getElementById("smile").parentElement.className+=" active";break;case"contact":$("title").text("Prakhar Mastain | CONTACT US"),e.currPAGE="contact",$("head").append('<link rel="stylesheet" class="pageCss" type="text/css" href="/css/contact.css">'),$(".page-content").load("/src/contact.html",processPage),document.getElementById("contact").parentElement.className+=" active";break;default:$("head").append('<link rel="stylesheet" class="pageCss" type="text/css" href="/css/error.css">'),$(".page-content").load("/src/error/404.html")}}function gotoPos(e){let t=document.getElementById(e);if(t){let a=t.offsetTop;window.scrollTo(0,a)}}function processPage(){let e=!1;var t=$("ul.menuList");let a=[],s;t.empty(),"profile"==appData.currPAGE?(a=profile.subnaviationList,s=profile.title):"smile"==appData.currPAGE&&(a=smile.subnaviationList,s=smile.title),a.length&&(e=!0),$.each(a,(e,a)=>{t.append('<li class="subNavLink"><a href="#'+a.href+'">'+a.name+"</a></li>")}),e?($(".subNav-header-content-title>p").text(s||""),$(".subNavIcon").css("display","block"),$(".subNav").css("display","block")):($(".subNav-header-content-title>p").text(" "),$(".subNavIcon").css("display","none"),$(".subNav").css("display","none"));let r=new URL(appData.currURL);r.hash&&gotoPos(r.hash.substr(1))}function toggleDarkMode(e){appData.userChoice.darkMode?(e.firstElementChild.className="fas fa-moon",document.getElementsByTagName("html")[0].classList.remove("theme-dark"),appData.userChoice.darkMode=!1):(e.firstElementChild.className="fas fa-sun",document.getElementsByTagName("html")[0].className+=" theme-dark",appData.userChoice.darkMode=!0)}function toggleOnlineMode(e){appData.online?(e.firstElementChild.className="fas fa-sun",document.getElementsByTagName("html")[0].className+=" offline",appData.online=!1):(e.firstElementChild.className="fas fa-moon",document.getElementsByTagName("html")[0].classList.remove("offline"),appData.online=!0)}$("document").ready(function(){"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then(e=>{console.log("serviceWorker Reistered successfully wit scope : "+e.scope)},e=>{console.log("serviceWorker Reistered Failed : "+e)}):console.log("serviceWorker not supported"),init(),$(document).on("click","a.internal",function(e){e.preventDefault(),appData.currURL=this.href,document.documentElement.scrollTop="0px",window.history.pushState(appData,"",appData.currURL),routeToUrl(appData)}),$(document).on("click","li.subNavLink",function(e){e.preventDefault(),new URL(appData.currURL),appData.currURL=e.target.href,window.history.pushState(appData,"",appData.currURL),gotoPos(e.target.hash.substr(1))}),$(window).on("resize",function(){setUI()}),$(".pannel-link").click(function(){$('[data-pannelId="'+this.dataset.pannelref+'"]').toggleClass("active")}),$(".subNav .overlay").click(function(){$(this).parent().removeClass("active")}),$(".subNav").hover(function(){$(".subNav").toggleClass("show")}),$(document).on("click",".subNavLink",function(){$(".subNav").removeClass("active")});var e=new Swipe($(".subNav>.container")[0]);e.setOnStart(function(){e.getElement().style.setProperty("transition","unset")}),e.setOnDrag((t,a)=>{e.getElement().style.left=Math.min(0,0-t)+"px"}),e.setOnEnd(function(t,a){t>100&&$(e.getElement()).parent().removeClass("active"),e.getElement().style.setProperty("transition","left 500ms"),e.getElement().style.removeProperty("left")}),e.run(),window.onpopstate=function(e){e.state&&routeToUrl(appData=e.state)}});